import {hash} from 'starknet';

const message = {
  from_address: '0x70BaacDe3C91b64f00D37a9B07Bf294600655fD2',
  payload: [
    '2078603289626043341054635759994245207449861009813861793671178142800190780834',
    '69',
    '0'
  ],
  selector: '1285101517810983806491589552491143496277809242732141897358598292095611420389',
  to_address: '3069768452457587449196331700965303301050740196780238415314752610503277885727'
  // 0x49872a1113409880832c25e4fa331bbfcb1864850605a49ce8779d2b66635a2 - user contract
  // 0x06c96d68401b740dbca6fb352262ea7d5026373ad5988b785f06ebc2aa23391f - bridge
};

export const txHash = msg => {
  // convert to bytes and then BN (as py works)
  const txHashPrefix = 'invoke'; // expected: 115923154332517
  const chainId = 'TESTNET'; // expected: 23720122242712916;
  const calldataHash = hash.hashCalldata(msg.payload);
  return hash.computeHashOnElements([
    txHashPrefix,
    msg.to_address,
    msg.selector,
    calldataHash,
    chainId
  ]);
};

/*
MAINNET = from_bytes(b"MAINNET")
TESTNET = from_bytes(b"TESTNET")
*/

/*
           TransactionType.DEPLOY: b"deploy",
            TransactionType.INVOKE_FUNCTION: b"invoke",
 */

/*
def from_bytes(
    value: bytes, byte_order: Optional[str] = None, signed: Optional[bool] = None
) -> int:
    """
    Converts the given bytes object (parsed according to the given byte order) to an integer.
    Default byte order is 'big'.
    """
    if byte_order is None:
        byte_order = "big"

    if signed is None:
        signed = False

    return int.from_bytes(value, byteorder=byte_order, signed=signed)

 */

/*


{"blockHash":"0xafba3867db9b97dd74bae081dcbcf511eb177a2c89fd8a4c8962153905c734d5","blockNumber":6015914,"contractAddress":null,"cumulativeGasUsed":636794,"effectiveGasPrice":"0x9502f907","from":"0x16fb96a5fa0427af0c8f7cf1eb4870231c8154b6","gasUsed":101395,"logsBloom":"0x00000000000000000000000000000000002000000000000000000000000000040000002000000000001000001000000000000000001008000000000000200080004000000000000000000008000000000000000000000000000000000008000000000408000100000000000000000000000000000000100000000010200000000000000000000000000000000000000000000000040000000000000080000000020000000000000000000001000000000000000000000000000000000100000200000202008000000000000000000000000000000084000000000000000000000010000000000000000010000000000000000002000000000000040000000000","status":true,"to":"0x70baacde3c91b64f00d37a9b07bf294600655fd2","transactionHash":"0x804a7bf3cdf295cd72d1ecb5bc3c1bfd2703a6c3e2dfb9c529116afd89d4a0ef","transactionIndex":3,"type":"0x2","events":{"0":{"address":"0xe4C2493C66e068D65Cf1C38a2d7bDa25d9f08980","blockHash":"0xafba3867db9b97dd74bae081dcbcf511eb177a2c89fd8a4c8962153905c734d5","blockNumber":6015914,"logIndex":16,"removed":false,"transactionHash":"0x804a7bf3cdf295cd72d1ecb5bc3c1bfd2703a6c3e2dfb9c529116afd89d4a0ef","transactionIndex":3,"id":"log_14e0478b","returnValues":{},"signature":null,"raw":{"data":"0x0000000000000000000000000000000000000000000000000000000000000045","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000000000000000000016fb96a5fa0427af0c8f7cf1eb4870231c8154b6","0x00000000000000000000000070baacde3c91b64f00d37a9b07bf294600655fd2"]}},"1":{"address":"0xe4C2493C66e068D65Cf1C38a2d7bDa25d9f08980","blockHash":"0xafba3867db9b97dd74bae081dcbcf511eb177a2c89fd8a4c8962153905c734d5","blockNumber":6015914,"logIndex":17,"removed":false,"transactionHash":"0x804a7bf3cdf295cd72d1ecb5bc3c1bfd2703a6c3e2dfb9c529116afd89d4a0ef","transactionIndex":3,"id":"log_95009332","returnValues":{},"signature":null,"raw":{"data":"0x0000000000000000000000000000000000000000000000000000000000000000","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000016fb96a5fa0427af0c8f7cf1eb4870231c8154b6","0x00000000000000000000000070baacde3c91b64f00d37a9b07bf294600655fd2"]}},"2":{"address":"0xde29d060D45901Fb19ED6C6e959EB22d8626708e","blockHash":"0xafba3867db9b97dd74bae081dcbcf511eb177a2c89fd8a4c8962153905c734d5","blockNumber":6015914,"logIndex":19,"removed":false,"transactionHash":"0x804a7bf3cdf295cd72d1ecb5bc3c1bfd2703a6c3e2dfb9c529116afd89d4a0ef","transactionIndex":3,"id":"log_c99c0301","returnValues":{},"signature":null,"raw":{"data":"0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000003049872a1113409880832c25e4fa331bbfcb1864850605a49ce8779d2b66635a200000000000000000000000000000000000000000000000000000000000000450000000000000000000000000000000000000000000000000000000000000000","topics":["0x474d2456b41fc1146ae05ba36e794e448efd2f172a9128ca1c8c6dbdb22b62f7","0x00000000000000000000000070baacde3c91b64f00d37a9b07bf294600655fd2","0x06c96d68401b740dbca6fb352262ea7d5026373ad5988b785f06ebc2aa23391f","0x02d757788a8d8d6f21d1cd40bce38a8222d70654214e96ff95d8086e684fbee5"]}},"LogDeposit":{"address":"0x70BaacDe3C91b64f00D37a9B07Bf294600655fD2","blockHash":"0xafba3867db9b97dd74bae081dcbcf511eb177a2c89fd8a4c8962153905c734d5","blockNumber":6015914,"logIndex":18,"removed":false,"transactionHash":"0x804a7bf3cdf295cd72d1ecb5bc3c1bfd2703a6c3e2dfb9c529116afd89d4a0ef","transactionIndex":3,"id":"log_e3d711f5","returnValues":{"0":"0x16Fb96a5fa0427Af0C8F7cF1eB4870231c8154B6","1":"69","2":"2078603289626043341054635759994245207449861009813861793671178142800190780834","sender":"0x16Fb96a5fa0427Af0C8F7cF1eB4870231c8154B6","amount":"69","l2Recipient":"2078603289626043341054635759994245207449861009813861793671178142800190780834"},"event":"LogDeposit","signature":"0x9dbb0e7dda3e09710ce75b801addc87cf9d9c6c581641b3275fca409ad086c62","raw":{"data":"0x00000000000000000000000016fb96a5fa0427af0c8f7cf1eb4870231c8154b60000000000000000000000000000000000000000000000000000000000000045049872a1113409880832c25e4fa331bbfcb1864850605a49ce8779d2b66635a2","topics":["0x9dbb0e7dda3e09710ce75b801addc87cf9d9c6c581641b3275fca409ad086c62"]}}}}


 */
